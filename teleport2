local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local savedCFrame = nil
local moving = false
local stepCFrame = nil
local speedMultiplier = 20
local bookmarks = {}
local espEnabled = false
local guiVisible = true

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ≠ŸÇŸàŸÇ
local creditLabel = Instance.new("TextLabel")
creditLabel.Size = UDim2.new(0,400,0,100)
creditLabel.Position = UDim2.new(0.5,-200,0.5,-50)
creditLabel.BackgroundTransparency = 1
creditLabel.TextColor3 = Color3.fromRGB(255,0,255)
creditLabel.TextScaled = true
creditLabel.Font = Enum.Font.Bangers
creditLabel.Text = "‚ú® gaster999_cool ‚ú®"
creditLabel.Parent = screenGui

task.delay(4, function()
    creditLabel:Destroy()

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0,250,0,350)
    frame.Position = UDim2.new(1,-260,0.5,-175)
    frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
    frame.BorderSizePixel = 0
    frame.Parent = screenGui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0,12)
    corner.Parent = frame

    -- ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
    local saveBtn = Instance.new("TextButton")
    saveBtn.Size = UDim2.new(1,-10,0,50)
    saveBtn.Position = UDim2.new(0,5,0,5)
    saveBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    saveBtn.Text = "ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸÉÿßŸÜ"
    saveBtn.TextScaled = true
    saveBtn.TextColor3 = Color3.new(1,1,1)
    saveBtn.Font = Enum.Font.GothamBold
    saveBtn.Parent = frame

    local tpBtn = Instance.new("TextButton")
    tpBtn.Size = UDim2.new(1,-10,0,50)
    tpBtn.Position = UDim2.new(0,5,0,60)
    tpBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    tpBtn.Text = "ÿßÿ∞Ÿáÿ® ŸÑŸÑŸÖŸÉÿßŸÜ (ŸÖÿ¥Ÿä ÿ™ÿØÿ±Ÿäÿ¨Ÿä)"
    tpBtn.TextScaled = true
    tpBtn.TextColor3 = Color3.new(1,1,1)
    tpBtn.Font = Enum.Font.GothamBold
    tpBtn.Parent = frame

    local instantTpBtn = Instance.new("TextButton")
    instantTpBtn.Size = UDim2.new(1,-10,0,50)
    instantTpBtn.Position = UDim2.new(0,5,0,115)
    instantTpBtn.BackgroundColor3 = Color3.fromRGB(70,120,120)
    instantTpBtn.Text = "ÿ™ŸÑŸäÿ®Ÿàÿ±ÿ™ÿ± ŸÖÿ®ÿßÿ¥ÿ± (M)"
    instantTpBtn.TextScaled = true
    instantTpBtn.TextColor3 = Color3.new(1,1,1)
    instantTpBtn.Font = Enum.Font.GothamBold
    instantTpBtn.Parent = frame

    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Size = UDim2.new(1,-10,0,30)
    distanceLabel.Position = UDim2.new(0,5,0,170)
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.TextColor3 = Color3.fromRGB(0,255,0)
    distanceLabel.TextScaled = true
    distanceLabel.Font = Enum.Font.GothamBold
    distanceLabel.Text = "Distance: 0"
    distanceLabel.Parent = frame

    -- ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±ÿπÿ©
    local speedLabel = Instance.new("TextLabel")
    speedLabel.Size = UDim2.new(1,-10,0,30)
    speedLabel.Position = UDim2.new(0,5,0,205)
    speedLabel.BackgroundTransparency = 1
    speedLabel.TextColor3 = Color3.fromRGB(255,255,0)
    speedLabel.TextScaled = true
    speedLabel.Font = Enum.Font.GothamBold
    speedLabel.Text = "Speed: "..speedMultiplier
    speedLabel.Parent = frame

    local plusBtn = Instance.new("TextButton")
    plusBtn.Size = UDim2.new(0.45,0,0,30)
    plusBtn.Position = UDim2.new(0.05,0,0,240)
    plusBtn.BackgroundColor3 = Color3.fromRGB(50,100,50)
    plusBtn.Text = "+ ÿ≤ŸäÿßÿØÿ©"
    plusBtn.TextScaled = true
    plusBtn.TextColor3 = Color3.new(1,1,1)
    plusBtn.Font = Enum.Font.GothamBold
    plusBtn.Parent = frame

    local minusBtn = Instance.new("TextButton")
    minusBtn.Size = UDim2.new(0.45,0,0,30)
    minusBtn.Position = UDim2.new(0.5,0,0,240)
    minusBtn.BackgroundColor3 = Color3.fromRGB(100,50,50)
    minusBtn.Text = "- ÿ™ŸÇŸÑŸäŸÑ"
    minusBtn.TextScaled = true
    minusBtn.TextColor3 = Color3.new(1,1,1)
    minusBtn.Font = Enum.Font.GothamBold
    minusBtn.Parent = frame

    local function updateSpeedLabel()
        speedLabel.Text = "Speed: "..speedMultiplier
    end

    plusBtn.MouseButton1Click:Connect(function()
        speedMultiplier = speedMultiplier + 100
        updateSpeedLabel()
    end)

    minusBtn.MouseButton1Click:Connect(function()
        if speedMultiplier > 100 then
            speedMultiplier = speedMultiplier - 100
            updateSpeedLabel()
        end
    end)

    -- ÿ≤ÿ± ÿ•ÿÆŸÅÿßÿ°/ÿ•ÿ∏Ÿáÿßÿ± GUI ÿ£ÿπŸÑŸâ ÿßŸÑÿ¥ÿßÿ¥ÿ©
    local hideBtn = Instance.new("TextButton")
    hideBtn.Size = UDim2.new(0,50,0,50)
    hideBtn.Position = UDim2.new(0.85,0,0.05,0)
    hideBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
    hideBtn.Text = "üëÅ"
    hideBtn.TextScaled = true
    hideBtn.TextColor3 = Color3.new(1,1,1)
    hideBtn.Font = Enum.Font.GothamBold
    hideBtn.Parent = screenGui

    hideBtn.MouseButton1Click:Connect(function()
        guiVisible = not guiVisible
        frame.Visible = guiVisible
    end)

    -- ÿ≤ÿ± ŸÉÿ¥ŸÅ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ON/OFF
    local espBtn = Instance.new("TextButton")
    espBtn.Size = UDim2.new(1,-10,0,30)
    espBtn.Position = UDim2.new(0,5,0,275)
    espBtn.BackgroundColor3 = Color3.fromRGB(100,50,150)
    espBtn.Text = "ESP: OFF"
    espBtn.TextScaled = true
    espBtn.TextColor3 = Color3.new(1,1,1)
    espBtn.Font = Enum.Font.GothamBold
    espBtn.Parent = frame

    local function toggleESP()
        espEnabled = not espEnabled
        espBtn.Text = espEnabled and "ESP: ON" or "ESP: OFF"
    end

    espBtn.MouseButton1Click:Connect(toggleESP)

    -- ESP loop
    RunService.Heartbeat:Connect(function()
        if espEnabled then
            for _, plr in pairs(Players:GetPlayers()) do
                if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") and plr.Character:FindFirstChild("Humanoid") then
                    local hrp = plr.Character.HumanoidRootPart
                    local head = plr.Character:FindFirstChild("Head")
                    local humanoid = plr.Character:FindFirstChild("Humanoid")
                    local nameTag = plr.Character:FindFirstChild("ESPTag")
                    if not nameTag then
                        nameTag = Instance.new("BillboardGui")
                        nameTag.Name = "ESPTag"
                        nameTag.Size = UDim2.new(0,150,0,50)
                        nameTag.Adornee = head or hrp
                        nameTag.AlwaysOnTop = true
                        nameTag.Parent = plr.Character

                        local label = Instance.new("TextLabel")
                        label.Size = UDim2.new(1,0,1,0)
                        label.BackgroundTransparency = 1
                        label.TextColor3 = Color3.new(0,1,0)
                        label.TextScaled = true
                        label.Font = Enum.Font.GothamBold
                        label.Text = plr.Name.." | HP: "..math.floor(humanoid.Health)
                        label.Parent = nameTag
                    end

                    local distance = (hrp.Position - player.Character.HumanoidRootPart.Position).Magnitude
                    local label = nameTag:FindFirstChildWhichIsA("TextLabel")
                    if label then
                        label.Text = plr.Name.." | HP: "..math.floor(humanoid.Health)
                        if distance < 20 then
                            label.TextColor3 = Color3.fromRGB(0,255,0)
                        elseif distance < 50 then
                            label.TextColor3 = Color3.fromRGB(255,255,0)
                        else
                            label.TextColor3 = Color3.fromRGB(255,0,0)
                        end
                    end
                end
            end
        else
            for _, plr in pairs(Players:GetPlayers()) do
                if plr.Character then
                    local tag = plr.Character:FindFirstChild("ESPTag")
                    if tag then tag:Destroy() end
                end
            end
        end
    end)

    -- ÿ≠ŸÅÿ∏ ŸàŸÖÿ¥Ÿä
    local function savePos()
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            savedCFrame = player.Character.HumanoidRootPart.CFrame
            stepCFrame = savedCFrame
            table.insert(bookmarks, savedCFrame)
            print("‚úÖ ÿßŸÑŸÖŸÉÿßŸÜ ŸÖÿ≠ŸÅŸàÿ∏")
        end
    end

    local function insaneForceTeleport(duration)
        if not savedCFrame then return end
        local char = player.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end
        local hrp = char.HumanoidRootPart
        moving = true
        local startTime = tick()
        local conn
        conn = RunService.Heartbeat:Connect(function(dt)
            if not moving or tick() - startTime > duration then
                moving = false
                conn:Disconnect()
                return
            end
            local targetPos = savedCFrame.Position
            local currentPos = hrp.Position
            local dir = targetPos - currentPos
            local stepSize = math.min(speedMultiplier*dt, dir.Magnitude)
            if stepSize > 0 then
                stepCFrame = CFrame.new(currentPos + dir.Unit*stepSize, targetPos + Vector3.new(0,0.5,0))
            end
            hrp.CFrame = stepCFrame
            distanceLabel.Text = ("Distance: %.2f"):format((targetPos - currentPos).Magnitude)
        end)
    end

    local function instantTeleport()
        if savedCFrame and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.CFrame = savedCFrame
            print("‚ö° ÿ™ŸÑŸäÿ®Ÿàÿ±ÿ™ÿ± ŸÖÿ®ÿßÿ¥ÿ±")
        end
    end

    saveBtn.MouseButton1Click:Connect(savePos)
    tpBtn.MouseButton1Click:Connect(function() insaneForceTeleport(10) end)
    instantTpBtn.MouseButton1Click:Connect(instantTeleport)

    player:GetMouse().KeyDown:Connect(function(key)
        if key == "n" then savePos() end
        if key == "m" then instantTeleport() end
    end)
end)
